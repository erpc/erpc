import { Callout } from "nextra/components";

# Directives

To instruct eRPC behavior on a per-request basis, you can provide directive "Headers" based on actual use-case.

## Retry empty responses

By default all empty-ish responses will be retried, and only if all upstreams return the same empty response, then client will receive the empty response.

Emptyish means any of these:
* Response is `[]` empty array for example for eth_getLogs
* Response is `null` or `{}` empty object for example for eth_getTransactionReceipt
* Response is `""` or `0x` empty hashed byte, for example for certain eth_call responses

To explicitly disable this behavior for certain requests, you can set the `X-Erpc-Retry-Empty` header to `false`. For example when you're requesting eth_getTransactionReceipt of mostly reecent transactions and prefer to immeditely get an empty response and handle it on your client side:
```bash
curl --location 'http://localhost:4000/main/evm/42161' \
--header 'Content-Type: application/json' \
--header 'X-Erpc-Retry-Empty: false' \
--data '{
    "method": "eth_getTransactionReceipt",
    "params": [
        "0xe014f359cb3988f9944cd8003aac58812730383041993fdf762efcee21172d15",
    ],
    "id": 9199,
    "jsonrpc": "2.0"
}'
```

## Retry pending transactions

By default requests towards pending transactions will be retried until tx is included (blockNumber is not `null`), and fail if even after all retries blockNumber is still null.

This behavior is applied to these methods:
* eth_getTransactionByHash
* eth_getTransactionByBlockHashAndIndex
* eth_getTransactionByBlockNumberAndIndex
* eth_getTransactionReceipt

To disable this behavior, you can set the `X-Erpc-Retry-Pending` header to `false`. For example if you're intentionally looking to query data of pending transactions (e.g. MEV bot) and prefer to immeditely get the pending tx data:
```bash
curl --location 'http://localhost:4000/main/evm/42161' \
--header 'Content-Type: application/json' \
--header 'X-Erpc-Retry-Pending: false' \
--data '{
    "method": "eth_getTransactionReceipt",
    "params": [
        "0xe014f359cb3988f9944cd8003aac58812730383041993fdf762efcee21172d15",
    ],
    "id": 9199,
    "jsonrpc": "2.0"
}'
```

<Callout type="info">
    Pending transactions (with blockNumber of `null`) are not stored in [cache](/config/database#evmjsonrpccache) because they are not guaranteed to be included in any block.
</Callout>
